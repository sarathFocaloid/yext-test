import{_ as T}from"../static/preload-helper-094304c8.js";import{r as p}from"../static/index-1b0cdb6b.js";import{s as _}from"../static/server.browser-6349b8e8.js";const y=e=>{const t=e.split("/");return t.pop(),t.map(()=>"../").reduce((r,n)=>r+n,"")};var l={exports:{}},s=String,u=function(){return{isColorSupported:!1,reset:s,bold:s,dim:s,italic:s,underline:s,inverse:s,hidden:s,strikethrough:s,black:s,red:s,green:s,yellow:s,blue:s,magenta:s,cyan:s,white:s,gray:s,bgBlack:s,bgRed:s,bgGreen:s,bgYellow:s,bgBlue:s,bgMagenta:s,bgCyan:s,bgWhite:s}};l.exports=u();l.exports.createColors=u;const v=e=>`<title>${e.title?e.title:"Yext Pages Site"}</title>
    <meta charset="${e.charset||"UTF-8"}">
    <meta name="viewport" content="${e.viewport||"width=device-width, initial-scale=1"}">
    ${e.tags?e.tags.map(x).join(`
`):""}
    ${e.other?e.other:""}`.split(`
`).filter(t=>t.trim()!="").join(`
`),x=e=>{switch(e.type){case"base":case"link":case"meta":return`<${e.type} ${d(e.attributes)}>`;case"style":case"script":case"noscript":case"template":return`<${e.type} ${d(e.attributes)}></${e.type}>`;default:return console.log(l.exports.yellow(`[WARNING]: Tag type ${e.type} is unsupported by the Tag interface. Please use "other" to render this tag.`)),""}},d=e=>Object.keys(e).map(t=>`${t}="${e[t]}"`).join(" "),P=(e,t)=>{var r,n;return e!=null&&e.lang?e.lang:(r=t==null?void 0:t.document)!=null&&r.locale?(n=t==null?void 0:t.document)==null?void 0:n.locale:"en"},R=(e,t,r,n,a)=>{if(!e.__meta.manifest)throw new Error("Manifest is undefined");const o=e.__meta.manifest.projectFilepaths,i=a?a(e):void 0,c=P(i,e),w=e.__meta.manifest.bundlerManifest,g=`${o.templatesRoot}/${t.templateName}.tsx`,m=`${o.scopedTemplatesPath}/${t.templateName}.tsx`,$=!!o.scopedTemplatesPath&&w[m]?m:g;return`<!DOCTYPE html>
    <html lang=${c}>
    <head>
        <script>window.__INITIAL__DATA__ = ${JSON.stringify(e)}<\/script>
        ${Array.from(h($,e.__meta.manifest.bundlerManifest,new Set)).map(b=>`<link rel="stylesheet" href="${e.relativePrefixToRoot+b}"/>`).join(`
`)}
        ${i?v(i):""}
    </head>
    <body>
        <div id="reactele">${r}</div>${n?`<script type="module" src="${e.relativePrefixToRoot+E(`${o.hydrationBundleOutputRoot}/${t.templateName}.tsx`,e)}" defer><\/script>`:""}
    </body>
    </html>`},h=(e,t,r)=>{const n=structuredClone(Object.entries(t).find(([c])=>c===e));if(!n)return new Set;const[a,o]=n;r.add(a);const i=new Set(o.css);return(o.imports||[]).flatMap(c=>Array.from(h(c,t,r))).forEach(c=>i.add(c)),i},E=(e,t)=>{const{__meta:r}=t;for(const[n,a]of Object.entries(r.manifest.bundlerManifest))if(n===e)return a.file},O=e=>{if(j(e.filename,e.config),!e.getPath)throw new Error(`Template ${e.filename} is missing an exported getPath function.`);if(!e.default&&!e.render)throw new Error(`Module ${e.filename} does not have the necessary exports to produce page. A module should either have a React component as a default export or a render function.`)},j=(e,t)=>{if(!t.name)throw new Error(`Template ${e} is missing a "name" in the config function.`);if(t.streamId&&t.stream)throw new Error(`Template ${e} must not define both a "streamId" and a "stream".`)},A=(e,t)=>{let r=e.split("/")[e.split("/").length-1];const n=r.slice(r.lastIndexOf("."));let a=r.slice(0,r.lastIndexOf("."));return t&&(r=r.split(n)[0].slice(0,r.split(n)[0].lastIndexOf("."))+n,a=a.slice(0,a.lastIndexOf("."))),{base:r,name:a}},N=(e,t,r)=>{const n=A(e,r),a={...t,config:S(n.name,t.config),path:e,filename:n.base,templateName:n.name};return O(a),a},S=(e,t)=>{var r;return{name:(r=t==null?void 0:t.name)!=null?r:e,...t}},f=new Map,F=async(e,t)=>{const r=t.bundlePaths[e].replace("assets","..");if(!r)throw new Error(`Could not find path for feature ${e}`);let n=f.get(r);n||(n=await T(()=>import(r),[]));const a=N(r,n,!0);return f.set(r,a),a},k=async(e,t)=>{var o,i;e.transformProps&&(t=await e.transformProps(t));const r=e.getPath(t);if(!r)throw new Error(`getPath does not return a valid string in template '${e.templateName}'`);const n={...t,path:r,relativePrefixToRoot:y(r)};return{content:H(e,n),path:r,redirects:(i=(o=e.getRedirects)==null?void 0:o.call(e,n))!=null?i:[]}},H=(e,t)=>{const{default:r,render:n,getHeadConfig:a}=e;if(!r&&!n)throw new Error(`Cannot render html from template '${e.config.name}'. Template is missing render function or default export.`);return n?(a&&console.warn(`getHeadConfig for template ${e.config.name} will not be called since a custom render function is defined.`),n(t)):R(t,e,_.exports.renderToString(p.exports.createElement(r,t)),!0,a)};var W=async e=>{const t=e.__meta.manifest,r=await F(e.document.__.name,t);return await k(r,e)};export{W as default};
